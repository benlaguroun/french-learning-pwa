"use strict";exports.id=2686,exports.ids=[2686],exports.modules={3018:(e,s,r)=>{r.d(s,{Fc:()=>c,TN:()=>d,XL:()=>o});var a=r(60687),t=r(43210),l=r(24224),n=r(96241);let i=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=t.forwardRef(({className:e,variant:s,...r},t)=>(0,a.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(i({variant:s}),e),...r}));c.displayName="Alert";let o=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("h5",{ref:r,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...s}));o.displayName="AlertTitle";let d=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...s}));d.displayName="AlertDescription"},5336:(e,s,r)=>{r.d(s,{A:()=>a});let a=(0,r(62688).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},13964:(e,s,r)=>{r.d(s,{A:()=>a});let a=(0,r(62688).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},28559:(e,s,r)=>{r.d(s,{A:()=>a});let a=(0,r(62688).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},50735:(e,s,r)=>{r.d(s,{Y:()=>d});var a=r(60687),t=r(43210),l=r(24934);let n=(0,r(62688).A)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);var i=r(97840),c=r(91391),o=r(58709);function d({src:e,label:s="استمع",onPlay:r,dataId:d}){let[u,f]=(0,t.useState)(!1),[m,x]=(0,t.useState)(0),[p,g]=(0,t.useState)(0),v=(0,t.useRef)(null),h=e=>{if(isNaN(e))return"0:00";let s=Math.floor(e/60),r=Math.floor(e%60);return`${s}:${r<10?"0":""}${r}`};return(0,a.jsx)("div",{className:"w-full max-w-md",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("audio",{ref:v,src:e,"data-audio-id":d}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l.$,{variant:"outline",size:"icon",onClick:()=>{let e=v.current;e&&(u?e.pause():(e.play().catch(e=>{console.error("Error playing audio:",e)}),r&&r()),f(!u))},className:"h-10 w-10 rounded-full",children:u?(0,a.jsx)(n,{className:"h-4 w-4"}):(0,a.jsx)(i.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(o.Slider,{value:[p],max:m||100,step:.1,onValueChange:e=>{let s=v.current;s&&(s.currentTime=e[0],g(e[0]))},className:"w-full"})}),(0,a.jsxs)("div",{className:"w-16 text-xs text-right",children:[h(p)," / ",h(m)]})]}),(0,a.jsx)("p",{className:"text-sm text-center text-muted-foreground",children:s})]})]}):(0,a.jsxs)(l.$,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{if(!e){if(u)window.speechSynthesis.cancel(),f(!1);else{let e=new SpeechSynthesisUtterance("Bonjour, comment \xe7a va?");e.lang="fr-FR",window.speechSynthesis.speak(e),f(!0),r&&r(),setTimeout(()=>{f(!1)},3e3)}}},children:[u?(0,a.jsx)(n,{className:"h-4 w-4"}):(0,a.jsx)(c.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:s})]})})}},52676:(e,s,r)=>{r.d(s,{$s:()=>n,ns:()=>o,pL:()=>c,vL:()=>i});let a="audio_recordings",t=e=>null,l=e=>{},n=(e,s,r,a)=>{let n=t(e);if(!n)return null;n.lessons[s]={completed:r,score:a,lastAccessed:new Date().toISOString()};let i=Object.keys(n.lessons).length,c=Object.values(n.lessons).filter(e=>e.completed).length,o=Object.keys(n.exercises).length,d=Object.values(n.exercises).filter(e=>e.completed).length,u=i+o;return n.overallProgress=u>0?(c+d)/u:0,l(n),n},i=(e,s,r,a)=>{let n=t(e);if(!n)return null;n.exercises[s]={completed:r,score:a,lastAccessed:new Date().toISOString()};let i=Object.keys(n.lessons).length,c=Object.values(n.lessons).filter(e=>e.completed).length,o=Object.keys(n.exercises).length,d=Object.values(n.exercises).filter(e=>e.completed).length,u=i+o;return n.overallProgress=u>0?(c+d)/u:0,l(n),n},c=(e,s,r)=>{let a=t(e);if(!a)return null;let n=a.syllables[s]||{attempts:0,successRate:0,lastPracticed:new Date().toISOString()};n.attempts+=1;let i=n.successRate*(n.attempts-1);return n.successRate=(i+ +!!r)/n.attempts,n.lastPracticed=new Date().toISOString(),a.syllables[s]=n,l(a),a},o=(e,s,r,t)=>new Promise((l,n)=>{try{let n=URL.createObjectURL(r),i={userId:e,syllable:s,recordingUrl:n,timestamp:new Date().toISOString(),success:t},o=localStorage.getItem(`${a}_${e}`)||"[]",d=JSON.parse(o);d.push(i),localStorage.setItem(`${a}_${e}`,JSON.stringify(d)),c(e,s,t),l(i)}catch(e){console.error("Error storing audio recording:",e),n(e)}})},55192:(e,s,r)=>{r.d(s,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>n,aR:()=>i,wL:()=>u});var a=r(60687),t=r(43210),l=r(96241);let n=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));n.displayName="Card";let i=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let c=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let o=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));o.displayName="CardDescription";let d=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent";let u=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s}));u.displayName="CardFooter"},57769:(e,s,r)=>{r.d(s,{Progress:()=>j});var a=r(60687),t=r(43210),l=r(11273),n=r(14163),i="Progress",[c,o]=(0,l.A)(i),[d,u]=c(i),f=t.forwardRef((e,s)=>{var r,t;let{__scopeProgress:l,value:i=null,max:c,getValueLabel:o=p,...u}=e;(c||0===c)&&!h(c)&&console.error((r=`${c}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let f=h(c)?c:100;null===i||y(i,f)||console.error((t=`${i}`,`Invalid prop \`value\` of value \`${t}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let m=y(i,f)?i:null,x=v(m)?o(m,f):void 0;return(0,a.jsx)(d,{scope:l,value:m,max:f,children:(0,a.jsx)(n.sG.div,{"aria-valuemax":f,"aria-valuemin":0,"aria-valuenow":v(m)?m:void 0,"aria-valuetext":x,role:"progressbar","data-state":g(m,f),"data-value":m??void 0,"data-max":f,...u,ref:s})})});f.displayName=i;var m="ProgressIndicator",x=t.forwardRef((e,s)=>{let{__scopeProgress:r,...t}=e,l=u(m,r);return(0,a.jsx)(n.sG.div,{"data-state":g(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...t,ref:s})});function p(e,s){return`${Math.round(e/s*100)}%`}function g(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function v(e){return"number"==typeof e}function h(e){return v(e)&&!isNaN(e)&&e>0}function y(e,s){return v(e)&&!isNaN(e)&&e<=s&&e>=0}x.displayName=m;var b=r(96241);let j=t.forwardRef(({className:e,value:s,...r},t)=>(0,a.jsx)(f,{ref:t,className:(0,b.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:(0,a.jsx)(x,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));j.displayName=f.displayName},58709:(e,s,r)=>{r.d(s,{Slider:()=>i});var a=r(60687),t=r(43210),l=r(24851),n=r(96241);let i=t.forwardRef(({className:e,...s},r)=>(0,a.jsxs)(l.bL,{ref:r,className:(0,n.cn)("relative flex w-full touch-none select-none items-center",e),...s,children:[(0,a.jsx)(l.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(l.Q6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(l.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));i.displayName=l.bL.displayName},73259:(e,s,r)=>{r.d(s,{A:()=>a});let a=(0,r(62688).A)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},85910:(e,s,r)=>{r.d(s,{Tabs:()=>i,TabsContent:()=>d,TabsList:()=>c,TabsTrigger:()=>o});var a=r(60687),t=r(43210),l=r(55146),n=r(96241);let i=l.bL,c=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(l.B8,{ref:r,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=l.B8.displayName;let o=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(l.l9,{ref:r,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));o.displayName=l.l9.displayName;let d=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(l.UC,{ref:r,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));d.displayName=l.UC.displayName},91391:(e,s,r)=>{r.d(s,{A:()=>a});let a=(0,r(62688).A)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])},93787:(e,s,r)=>{r.d(s,{R:()=>g});var a=r(60687),t=r(43210),l=r(24934),n=r(57769),i=r(97840);let c=(0,r(62688).A)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var o=r(73259),d=r(13964),u=r(11860),f=r(3018),m=r(96241),x=r(50735),p=r(52676);function g({referenceAudioUrl:e,onResult:s,syllable:r}){let[g,v]=(0,t.useState)(!1),[h,y]=(0,t.useState)(null),[b,j]=(0,t.useState)(0),[N,w]=(0,t.useState)(!1),[k,R]=(0,t.useState)(null),[S,A]=(0,t.useState)(!1),[C,$]=(0,t.useState)(!1),M=(0,t.useRef)(null),O=(0,t.useRef)([]),T=(0,t.useRef)(null),L=(0,t.useRef)(null),P=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});M.current=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"}),O.current=[],M.current.ondataavailable=e=>{O.current.push(e.data)},M.current.onstop=()=>{let e=new Blob(O.current,{type:"audio/webm"}),s=URL.createObjectURL(e);y(s),L.current&&(L.current.src=s),U(e)},M.current.start(),v(!0),j(0),R(null),T.current=setInterval(()=>{j(e=>e>=5?(I(),e):e+1)},1e3),A(!1)}catch(e){console.error("Error accessing microphone:",e),A(!0)}},I=()=>{M.current&&g&&(M.current.stop(),v(!1),M.current.stream.getTracks().forEach(e=>e.stop()),T.current&&(clearInterval(T.current),T.current=null))},z=async()=>{$(!0);try{await new Promise(e=>setTimeout(e,1500));let a=await D(e),t=await D(h||""),l=F(a,t)>.7;if(R(l?"success":"error"),s&&s(l),h){let e=await fetch(h).then(e=>e.blob());(0,p.ns)("user123",r,e,l)}}catch(e){console.error("Error comparing audio:",e),R("error"),s&&s(!1)}finally{$(!1)}},D=async e=>(await new Promise(e=>setTimeout(e,500)),Array.from({length:10},()=>Math.random())),F=(e,s)=>{let r=0,a=0,t=0;for(let l=0;l<e.length;l++)r+=e[l]*s[l],a+=e[l]*e[l],t+=s[l]*s[l];let l=.3*Math.random()+.7;return r/((a=Math.sqrt(a))*(t=Math.sqrt(t)))*l},U=async e=>{try{console.log(`Storing recording for syllable: ${r}`)}catch(e){console.error("Error storing recording:",e)}};return(0,a.jsxs)("div",{className:"space-y-4 rounded-lg border bg-card p-4",children:[S&&(0,a.jsx)(f.Fc,{variant:"destructive",children:(0,a.jsx)(f.TN,{children:"يرجى السماح بالوصول إلى الميكروفون للتمكن من تسجيل صوتك"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"text-xl font-bold",children:r})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Y,{src:e,compact:!0,label:"استمع"}),h&&!g&&(0,a.jsx)(l.$,{variant:"outline",size:"icon",onClick:()=>{L.current&&h&&(w(!0),L.current.play(),L.current.onended=()=>w(!1))},disabled:N,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})}),g?(0,a.jsx)(l.$,{variant:"destructive",size:"icon",onClick:I,children:(0,a.jsx)(c,{className:"h-4 w-4"})}):(0,a.jsx)(l.$,{variant:"default",size:"icon",onClick:P,className:(0,m.cn)("bg-red-500 hover:bg-red-600",b>0&&"bg-primary hover:bg-primary/90"),children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})]})]}),g&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{children:"جارٍ التسجيل..."}),(0,a.jsxs)("span",{children:[b,"s / 5s"]})]}),(0,a.jsx)(n.Progress,{value:20*b,className:"h-2"})]}),h&&!g&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(l.$,{onClick:z,disabled:null!==k||C,className:C?"opacity-80":"",children:C?"جارٍ تحليل النطق...":"تحقق من النطق"})}),k&&(0,a.jsx)("div",{className:(0,m.cn)("mt-2 flex items-center gap-2 rounded-md p-2","success"===k?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"),children:"success"===k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"أحسنت! النطق صحيح"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"حاول مرة أخرى، النطق غير صحيح"})]})})]})}},97840:(e,s,r)=>{r.d(s,{A:()=>a});let a=(0,r(62688).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])}};