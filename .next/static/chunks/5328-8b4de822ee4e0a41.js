"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5328],{1397:(e,r,t)=>{t.d(r,{Progress:()=>i});var s=t(5155),a=t(2115),n=t(5863),l=t(3999);let i=a.forwardRef((e,r)=>{let{className:t,value:a,...i}=e;return(0,s.jsx)(n.bL,{ref:r,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:(0,s.jsx)(n.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});i.displayName=n.bL.displayName},2219:(e,r,t)=>{t.d(r,{Slider:()=>i});var s=t(5155),a=t(2115),n=t(4073),l=t(3999);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsxs)(n.bL,{ref:r,className:(0,l.cn)("relative flex w-full touch-none select-none items-center",t),...a,children:[(0,s.jsx)(n.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(n.Q6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(n.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});i.displayName=n.bL.displayName},3999:(e,r,t)=>{t.d(r,{cn:()=>n});var s=t(2596),a=t(9688);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},4371:(e,r,t)=>{t.d(r,{Y:()=>d});var s=t(5155),a=t(2115),n=t(7168),l=t(2178),i=t(5690),c=t(5273),o=t(2219);function d(e){let{src:r,label:t="استمع",onPlay:d,dataId:u}=e,[f,m]=(0,a.useState)(!1),[g,v]=(0,a.useState)(0),[x,p]=(0,a.useState)(0),h=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=h.current;if(!e)return;let r=()=>{v(e.duration)},t=()=>{p(e.currentTime)},s=()=>{m(!1),p(0)};return e.addEventListener("loadeddata",r),e.addEventListener("timeupdate",t),e.addEventListener("ended",s),()=>{e.removeEventListener("loadeddata",r),e.removeEventListener("timeupdate",t),e.removeEventListener("ended",s)}},[]);let b=e=>{if(isNaN(e))return"0:00";let r=Math.floor(e/60),t=Math.floor(e%60);return"".concat(r,":").concat(t<10?"0":"").concat(t)};return(0,s.jsx)("div",{className:"w-full max-w-md",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("audio",{ref:h,src:r,"data-audio-id":u}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(n.$,{variant:"outline",size:"icon",onClick:()=>{let e=h.current;e&&(f?e.pause():(e.play().catch(e=>{console.error("Error playing audio:",e)}),d&&d()),m(!f))},className:"h-10 w-10 rounded-full",children:f?(0,s.jsx)(l.A,{className:"h-4 w-4"}):(0,s.jsx)(i.A,{className:"h-4 w-4"})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(o.Slider,{value:[x],max:g||100,step:.1,onValueChange:e=>{let r=h.current;r&&(r.currentTime=e[0],p(e[0]))},className:"w-full"})}),(0,s.jsxs)("div",{className:"w-16 text-xs text-right",children:[b(x)," / ",b(g)]})]}),(0,s.jsx)("p",{className:"text-sm text-center text-muted-foreground",children:t})]})]}):(0,s.jsxs)(n.$,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{if(!r){if(f)window.speechSynthesis.cancel(),m(!1);else{let e=new SpeechSynthesisUtterance("Bonjour, comment \xe7a va?");e.lang="fr-FR",window.speechSynthesis.speak(e),m(!0),d&&d(),setTimeout(()=>{m(!1)},3e3)}}},children:[f?(0,s.jsx)(l.A,{className:"h-4 w-4"}):(0,s.jsx)(c.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:t})]})})}},4964:(e,r,t)=>{t.d(r,{Tabs:()=>i,TabsContent:()=>d,TabsList:()=>c,TabsTrigger:()=>o});var s=t(5155),a=t(2115),n=t(704),l=t(3999);let i=n.bL,c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.B8,{ref:r,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});c.displayName=n.B8.displayName;let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.l9,{ref:r,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});o.displayName=n.l9.displayName;let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(n.UC,{ref:r,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});d.displayName=n.UC.displayName},5306:(e,r,t)=>{t.d(r,{R:()=>x});var s=t(5155),a=t(2115),n=t(7168),l=t(1397),i=t(5690),c=t(8979),o=t(9588),d=t(5196),u=t(4416),f=t(9026),m=t(3999),g=t(4371),v=t(6644);function x(e){let{referenceAudioUrl:r,onResult:t,syllable:x}=e,[p,h]=(0,a.useState)(!1),[b,y]=(0,a.useState)(null),[j,N]=(0,a.useState)(0),[w,S]=(0,a.useState)(!1),[R,k]=(0,a.useState)(null),[C,L]=(0,a.useState)(!1),[O,E]=(0,a.useState)(!1),A=(0,a.useRef)(null),T=(0,a.useRef)([]),_=(0,a.useRef)(null),I=(0,a.useRef)(null);(0,a.useEffect)(()=>(I.current=new Audio,()=>{b&&URL.revokeObjectURL(b)}),[r,b]);let P=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});A.current=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"}),T.current=[],A.current.ondataavailable=e=>{T.current.push(e.data)},A.current.onstop=()=>{let e=new Blob(T.current,{type:"audio/webm"}),r=URL.createObjectURL(e);y(r),I.current&&(I.current.src=r),z(e)},A.current.start(),h(!0),N(0),k(null),_.current=setInterval(()=>{N(e=>e>=5?(U(),e):e+1)},1e3),L(!1)}catch(e){console.error("Error accessing microphone:",e),L(!0)}},U=()=>{A.current&&p&&(A.current.stop(),h(!1),A.current.stream.getTracks().forEach(e=>e.stop()),_.current&&(clearInterval(_.current),_.current=null))},D=async()=>{E(!0);try{await new Promise(e=>setTimeout(e,1500));let e=await F(r),s=await F(b||""),a=$(e,s)>.7;if(k(a?"success":"error"),t&&t(a),b){let e=await fetch(b).then(e=>e.blob());(0,v.ns)("user123",x,e,a)}}catch(e){console.error("Error comparing audio:",e),k("error"),t&&t(!1)}finally{E(!1)}},F=async e=>(await new Promise(e=>setTimeout(e,500)),Array.from({length:10},()=>Math.random())),$=(e,r)=>{let t=0,s=0,a=0;for(let n=0;n<e.length;n++)t+=e[n]*r[n],s+=e[n]*e[n],a+=r[n]*r[n];let n=.3*Math.random()+.7;return t/((s=Math.sqrt(s))*(a=Math.sqrt(a)))*n},z=async e=>{try{console.log("Storing recording for syllable: ".concat(x))}catch(e){console.error("Error storing recording:",e)}};return(0,s.jsxs)("div",{className:"space-y-4 rounded-lg border bg-card p-4",children:[C&&(0,s.jsx)(f.Fc,{variant:"destructive",children:(0,s.jsx)(f.TN,{children:"يرجى السماح بالوصول إلى الميكروفون للتمكن من تسجيل صوتك"})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"text-xl font-bold",children:x})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.Y,{src:r,compact:!0,label:"استمع"}),b&&!p&&(0,s.jsx)(n.$,{variant:"outline",size:"icon",onClick:()=>{I.current&&b&&(S(!0),I.current.play(),I.current.onended=()=>S(!1))},disabled:w,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})}),p?(0,s.jsx)(n.$,{variant:"destructive",size:"icon",onClick:U,children:(0,s.jsx)(c.A,{className:"h-4 w-4"})}):(0,s.jsx)(n.$,{variant:"default",size:"icon",onClick:P,className:(0,m.cn)("bg-red-500 hover:bg-red-600",j>0&&"bg-primary hover:bg-primary/90"),children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})]})]}),p&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{children:"جارٍ التسجيل..."}),(0,s.jsxs)("span",{children:[j,"s / 5s"]})]}),(0,s.jsx)(l.Progress,{value:20*j,className:"h-2"})]}),b&&!p&&(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(n.$,{onClick:D,disabled:null!==R||O,className:O?"opacity-80":"",children:O?"جارٍ تحليل النطق...":"تحقق من النطق"})}),R&&(0,s.jsx)("div",{className:(0,m.cn)("mt-2 flex items-center gap-2 rounded-md p-2","success"===R?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"),children:"success"===R?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"أحسنت! النطق صحيح"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"حاول مرة أخرى، النطق غير صحيح"})]})})]})}},6644:(e,r,t)=>{t.d(r,{$s:()=>i,ns:()=>d,pL:()=>o,vL:()=>c});let s="user_progress",a="audio_recordings",n=e=>{let r=localStorage.getItem("".concat(s,"_").concat(e));if(!r)return null;try{return JSON.parse(r)}catch(e){return console.error("Error parsing user progress:",e),null}},l=e=>{try{localStorage.setItem("".concat(s,"_").concat(e.userId),JSON.stringify(e))}catch(e){console.error("Error saving user progress:",e)}},i=(e,r,t,s)=>{let a=n(e);if(!a)return null;a.lessons[r]={completed:t,score:s,lastAccessed:new Date().toISOString()};let i=Object.keys(a.lessons).length,c=Object.values(a.lessons).filter(e=>e.completed).length,o=Object.keys(a.exercises).length,d=Object.values(a.exercises).filter(e=>e.completed).length,u=i+o;return a.overallProgress=u>0?(c+d)/u:0,l(a),a},c=(e,r,t,s)=>{let a=n(e);if(!a)return null;a.exercises[r]={completed:t,score:s,lastAccessed:new Date().toISOString()};let i=Object.keys(a.lessons).length,c=Object.values(a.lessons).filter(e=>e.completed).length,o=Object.keys(a.exercises).length,d=Object.values(a.exercises).filter(e=>e.completed).length,u=i+o;return a.overallProgress=u>0?(c+d)/u:0,l(a),a},o=(e,r,t)=>{let s=n(e);if(!s)return null;let a=s.syllables[r]||{attempts:0,successRate:0,lastPracticed:new Date().toISOString()};a.attempts+=1;let i=a.successRate*(a.attempts-1);return a.successRate=(i+ +!!t)/a.attempts,a.lastPracticed=new Date().toISOString(),s.syllables[r]=a,l(s),s},d=(e,r,t,s)=>new Promise((n,l)=>{try{let l=URL.createObjectURL(t),i={userId:e,syllable:r,recordingUrl:l,timestamp:new Date().toISOString(),success:s},c=localStorage.getItem("".concat(a,"_").concat(e))||"[]",d=JSON.parse(c);d.push(i),localStorage.setItem("".concat(a,"_").concat(e),JSON.stringify(d)),o(e,r,s),n(i)}catch(e){console.error("Error storing audio recording:",e),l(e)}})},7168:(e,r,t)=>{t.d(r,{$:()=>o});var s=t(5155),a=t(2115),n=t(9708),l=t(2085),i=t(3999);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,r)=>{let{className:t,variant:a,size:l,asChild:o=!1,...d}=e,u=o?n.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(c({variant:a,size:l,className:t})),ref:r,...d})});o.displayName="Button"},8482:(e,r,t)=>{t.d(r,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>l,aR:()=>i,wL:()=>u});var s=t(5155),a=t(2115),n=t(3999);let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});l.displayName="Card";let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},9026:(e,r,t)=>{t.d(r,{Fc:()=>c,TN:()=>d,XL:()=>o});var s=t(5155),a=t(2115),n=t(2085),l=t(3999);let i=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=a.forwardRef((e,r)=>{let{className:t,variant:a,...n}=e;return(0,s.jsx)("div",{ref:r,role:"alert",className:(0,l.cn)(i({variant:a}),t),...n})});c.displayName="Alert";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h5",{ref:r,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})});o.displayName="AlertTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",t),...a})});d.displayName="AlertDescription"}}]);